import { Case } from '../types';

export const cases: Case[] = [
  {
    id: 'mbg-001',
    title: 'Keracunan Massal di Kampus UI Depok',
    location: {
      city: 'Depok',
      province: 'Jawa Barat',
    },
    date: '2025-03-15',
    category: ['keracunan', 'kampus', 'catering'],
    sources: [
      'https://detik.com/berita/12345',
      'https://kompas.com/metro/67890',
    ],
    description: 'Puluhan mahasiswa UI mengalami keracunan makanan setelah mengonsumsi nasi kotak catering yang disediakan pada acara seminar. Diduga bahan makanan yang digunakan sudah tidak segar. Seluruh korban dilarikan ke rumah sakit terdekat dengan gejala mual, muntah, dan diare.',
    severity: 'high',
  },
  {
    id: 'mbg-002',
    title: 'Bakso Tikus di Pasar Tanah Abang',
    location: {
      city: 'Jakarta Pusat',
      province: 'DKI Jakarta',
    },
    date: '2025-02-28',
    category: ['pemalsuan', 'daging', 'pasar'],
    sources: [
      'https://metrotv.com/news/24680',
      'https://liputan6.com/metro/13579',
    ],
    description: 'Pedagang bakso di Pasar Tanah Abang tertangkap basah menggunakan daging tikus sebagai campuran bakso. Petugas menemukan puluhan tikus mati dan alat penggiling daging di gudang belakang. Pedagang mengaku melakukannya untuk menekan biaya produksi karena harga daging sapi yang tinggi.',
    severity: 'critical',
  },
  {
    id: 'mbg-003',
    title: 'Bubble Tea dengan Bahan Kimia Berbahaya',
    location: {
      city: 'Surabaya',
      province: 'Jawa Timur',
    },
    date: '2025-04-02',
    category: ['minuman', 'bahan kimia', 'franchise'],
    sources: [
      'https://surya.com/surabaya/54321',
      'https://tribunnews.com/jatim/98765',
    ],
    description: 'Sejumlah gerai bubble tea terkenal di Surabaya ketahuan menggunakan bahan kimia berbahaya untuk campuran minuman mereka. Bahan tersebut digunakan sebagai pengawet dan pewarna pada bubble (boba) yang dapat menyebabkan gangguan pencernaan dan kerusakan hati dalam jangka panjang.',
    severity: 'high',
  },
  {
    id: 'mbg-004',
    title: 'Mi Instan Bekas di Restoran Cepat Saji',
    location: {
      city: 'Bandung',
      province: 'Jawa Barat',
    },
    date: '2025-02-10',
    category: ['restoran', 'daur ulang', 'pemalsuan'],
    sources: [
      'https://pikiran-rakyat.com/bandung/13579',
      'https://jabar.tribunnews.com/24680',
    ],
    description: 'Sebuah restoran cepat saji terkenal di Bandung terungkap menggunakan mi instan bekas yang didaur ulang dari tempat sampah hotel berbintang. Mi tersebut dicuci dan direbus ulang sebelum disajikan kepada pelanggan. Praktik ini telah berlangsung selama berbulan-bulan.',
    severity: 'critical',
  },
  {
    id: 'mbg-005',
    title: 'Ikan Formalin di Pasar Tradisional Makassar',
    location: {
      city: 'Makassar',
      province: 'Sulawesi Selatan',
    },
    date: '2025-05-15',
    category: ['ikan', 'formalin', 'pasar'],
    sources: [
      'https://fajar.co.id/makassar/31415',
      'https://kompas.com/regional/27182',
    ],
    description: 'Petugas BPOM menemukan kandungan formalin yang tinggi pada ikan-ikan di Pasar Tradisional Makassar. Ikan-ikan tersebut terlihat segar meski sudah berhari-hari dijajakan karena penggunaan formalin. Petugas langsung melakukan penyitaan dan menghancurkan ikan-ikan tersebut.',
    severity: 'high',
  },
  {
    id: 'mbg-006',
    title: 'Kerupuk yang Mengandung Boraks',
    location: {
      city: 'Semarang',
      province: 'Jawa Tengah',
    },
    date: '2025-01-12',
    category: ['cemilan', 'boraks', 'produksi rumahan'],
    sources: [
      'https://suaramerdeka.com/semarang/22446',
      'https://tribunjateng.com/kota/88421',
    ],
    description: 'Produsen kerupuk rumahan di Semarang ditemukan menggunakan boraks dalam produksi kerupuknya. Boraks ditambahkan untuk membuat kerupuk lebih renyah dan tahan lama. Pemilik usaha mengaku tidak mengetahui bahaya boraks bagi kesehatan.',
    severity: 'medium',
  },
  {
    id: 'mbg-007',
    title: 'Pupuk Urea dalam Beras',
    location: {
      city: 'Medan',
      province: 'Sumatera Utara',
    },
    date: '2025-03-28',
    category: ['beras', 'pemutih', 'distributor'],
    sources: [
      'https://waspada.co.id/medan/66125',
      'https://tribun-medan.com/sumut/99124',
    ],
    description: 'Distributor beras di Medan tertangkap mencampurkan pupuk urea ke dalam beras untuk membuatnya terlihat lebih putih dan berkilau. Praktik ini berbahaya karena pupuk urea mengandung nitrogen tinggi yang dapat menyebabkan gangguan ginjal jika dikonsumsi secara berkala.',
    severity: 'high',
  },
  {
    id: 'mbg-008',
    title: 'Es Batu dari Air Selokan',
    location: {
      city: 'Jakarta Utara',
      province: 'DKI Jakarta',
    },
    date: '2025-02-20',
    category: ['minuman', 'es', 'kebersihan'],
    sources: [
      'https://megapolitan.kompas.com/jakarta/77123',
      'https://detik.com/berita/jakarta/44166',
    ],
    description: 'Pabrik es batu di Jakarta Utara digerebek petugas setelah ketahuan menggunakan air selokan untuk membuat es batu. Air selokan ditampung dan hanya disaring seadanya tanpa proses sterilisasi yang benar. Es batu ini didistribusikan ke warung-warung makan dan pedagang kaki lima di sekitar Jakarta.',
    severity: 'critical',
  },
  {
    id: 'mbg-009',
    title: 'Minyak Jelantah Daur Ulang',
    location: {
      city: 'Yogyakarta',
      province: 'DI Yogyakarta',
    },
    date: '2025-04-18',
    category: ['minyak', 'daur ulang', 'kemasan'],
    sources: [
      'https://jogja.tribunnews.com/kuliner/84152',
      'https://kompas.com/regional/yogya/32168',
    ],
    description: 'Pengusaha nakal di Yogyakarta tertangkap mendaur ulang minyak jelantah dari tempat sampah restoran dan hotel. Minyak hitam tersebut diproses ulang dan diberi pewarna agar terlihat seperti minyak baru, kemudian dikemas dalam botol berlabel dan dijual dengan harga murah.',
    severity: 'high',
  },
  {
    id: 'mbg-010',
    title: 'Susu Kadaluarsa Daur Ulang',
    location: {
      city: 'Malang',
      province: 'Jawa Timur',
    },
    date: '2025-03-05',
    category: ['susu', 'kadaluarsa', 'label'],
    sources: [
      'https://surya.co.id/malang/55123',
      'https://jatim.tribunnews.com/malang/66117',
    ],
    description: 'Sebuah gudang di pinggiran Kota Malang digerebek petugas karena aktivitas mendaur ulang susu kadaluarsa. Pelaku membuka kemasan susu kadaluarsa, mengganti label kedaluwarsa dengan yang baru, dan menjualnya kembali ke pasar dengan harga diskon. Ribuan kotak susu kadaluarsa ditemukan di gudang tersebut.',
    severity: 'critical',
  },
];

export const getCategories = (): string[] => {
  const categoriesSet = new Set<string>();
  
  cases.forEach(item => {
    item.category.forEach(cat => categoriesSet.add(cat));
  });
  
  return Array.from(categoriesSet);
};

export const getCaseById = (id: string): Case | undefined => {
  return cases.find(item => item.id === id);
};

export const searchCases = (query: string): Case[] => {
  const lowerQuery = query.toLowerCase();
  
  return cases.filter(item => 
    item.title.toLowerCase().includes(lowerQuery) ||
    item.description.toLowerCase().includes(lowerQuery) ||
    item.location.city.toLowerCase().includes(lowerQuery) ||
    item.location.province.toLowerCase().includes(lowerQuery) ||
    item.category.some(cat => cat.toLowerCase().includes(lowerQuery))
  );
};

export const filterCasesByCategory = (categories: string[]): Case[] => {
  if (categories.length === 0) return cases;
  
  return cases.filter(item => 
    item.category.some(cat => categories.includes(cat))
  );
};